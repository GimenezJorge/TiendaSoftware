@model TiendaSoftware1.Models.Carrito

<!DOCTYPE html>
<html>
<head>
    <title>Carrito de Compras</title>
</head>
<body>
    <h1>Carrito de Compras</h1>

    @if (ViewBag.Mensaje != null)
    {
        <p style="color: red;">@ViewBag.Mensaje</p> <!-- Mensaje de error -->
    }

    @if (!Model.CarritoProductos.Any())
    {
        <p>No hay productos en el carrito.</p>
    }
    else
    {
        <ul>
            @foreach (var carritoProducto in Model.CarritoProductos)
            {
                <li>
                    <h2>@carritoProducto.Producto.Nombre</h2>
                    <p>Precio: @carritoProducto.Producto.Precio</p>
                    <p>Cantidad: @carritoProducto.Cantidad</p>
                    <p>Subtotal: @((carritoProducto.Producto.Precio * carritoProducto.Cantidad).ToString("C"))</p>

                    <!-- Muestra la imagen del producto con un tamaño mayor -->
                    <img src="@Url.Content(carritoProducto.Producto.ImagenUrl)" alt="@carritoProducto.Producto.Nombre" style="width: 150px; height: auto;" />

                    <!-- Botón para quitar del carrito -->
                    <form action="@Url.Action("QuitarDelCarrito", "Carrito")" method="post">
                        <input type="hidden" name="productoId" value="@carritoProducto.ProductoId" />
                        <button type="submit">Quitar del Carrito</button>
                    </form>
                </li>
            }
        </ul>

        <p>Total: @((Model.CarritoProductos.Sum(cp => cp.Producto.Precio * cp.Cantidad)).ToString("C"))</p>
    }

    <a href="@Url.Action("Index", "Home")">Seguir comprando</a>
</body>
</html>
